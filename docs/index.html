<!DOCTYPE html>
<html lang="en">
<head>
    <title>厦门大学软件工程资源库</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="UTF-8">
    <meta name="keywords" content="厦大软工" />
    <link rel="stylesheet" href="css/bootstrap.css">
    <link rel="stylesheet" href="css/style.css" type="text/css" media="all" />
    <style>
        /* 列表项的样式 */
        #resource-links li {
            background-color: #87CEEB; /* 天蓝色背景 */
            color: #ffffff; /* 白色字体 */
            padding: 10px; /* 内边距 */
            margin-bottom: 5px; /* 每个列表项之间的间距 */
            border-radius: 5px; /* 圆角效果 */
            list-style-type: none; /* 去掉默认的项目符号 */
        }

        /* 列表项中的链接样式 */
        #resource-links li a {
            color: #ffffff; 
            text-decoration: none; /* 去掉下划线 */
        }

        /* 当鼠标悬停在列表项上时 */
        #resource-links li a:hover {
            text-decoration: underline; /* 悬停时显示下划线 */
        }

        .resource-list {
            display: none;
            margin-top: 20px;
        }

        .resource-list ul {
            list-style-type: none;
        }

        .resource-list ul li {
            margin: 10px 0;
        }

        .resource-list ul li a {
            color: #3498db;
            text-decoration: none;
        }

        .resource-list ul li a:hover {
            text-decoration: underline;
        }
    </style>
</head>

<body>
    <div class="header">
        <nav class="navbar navbar-default">
            <div class="navbar-header">
                <h1 class="custom-heading">
                    <a href="index.html">厦门大学软件工程资源库</a>
                </h1>
            </div>
            <div class="top-nav-text">
                <ul class="social_agileinfo">
                    <li><a href="#" class="w3_facebook"><i class="fa fa-weixin"></i></a></li>
                    <li><a href="#" class="w3_twitter"><i class="fa fa-twitter"></i></a></li>
                    <li><a href="#" class="w3_instagram"><i class="fa fa-instagram"></i></a></li>
                    <li><a href="#" class="w3_google"><i class="fa fa-qq"></i></a></li>
                </ul>
            </div>
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav navbar-right custom-nav">
                    <li><a class="hvr-underline-from-center active" href="index.html">首页</a></li>
                    <li><a href="#notify-section" class="hvr-underline-from-center scroll">通知公告</a></li>
                    <li class="dropdown">
                        <a href="#" class="coursesourse" data-toggle="dropdown">
                            <span data-hover="dropdown">课程资源</span><span class="caret"></span>
                        </a>
                        <ul class="dropdown-menu">
                            <li><a href="#" onclick="fetchResources('公共基本课程')">公共基本课程</a></li>
                            <li><a href="#" onclick="fetchResources('学科通修课程')">学科通修课程</a></li>
                            <li><a href="#" onclick="fetchResources('专业课程')">专业课程</a></li>
                            <li><a href="#" onclick="fetchResources('院选课程')">院选课程</a></li>
                        </ul>
                    </li>
                    <li><a href="#database" class="hvr-underline-from-center scroll">数据库</a></li>
                    <li><a href="#paolu" class="hvr-underline-from-center scroll">转专业板块</a></li>
                    <li><a href="#about-section" class="hvr-underline-from-center scroll">关于</a></li>
                </ul>
            </div>
            <div class="clearfix"></div>
        </nav>
    </div>

    <!-- 显示资源列表的区域 -->
    <div class="container resource-list" id="resource-list">
        <h2 id="resource-title"></h2>
        <ul id="resource-links"></ul>
    </div>

    <!-- 通知公告 -->
    <div class="container notify-section" id="notify-section" style="display: none;">
        <h2>通知</h2>
        <p>暂无</p>
    </div>

    <!-- 数据库 -->
    <div class="container database" id="database" style="display: none;">
        <h2>数据库</h2>
        <p></p>
    </div>

    <!-- 转专业 -->
    <div class="container paolu" id="paolu" style="display: none;">
        <h2>转专业资源</h2>
        <p>预计搬一些转专业经验</p>
    </div>

    <!-- "关于我们" 内容区域 -->
    <div class="container about-container" id="about-section" style="display: none;">
        <h2>关于我们</h2>
        <p>该网站是厦门大学软件工程资源库，为厦门大学软件工程专业学生提供课程资源共享。所有资源由学生自主提供和管理，旨在促进学习和交流，严禁商用。</p>
        <p>欢迎补充、维护、更新网站资源</p>
        <p>该共享仓库系二O二四年九月由厦门大学软件工程系学生自主建立，旨在为学弟学妹提供学习资源，以便不时之需</p>
        <h3>开发者信息</h3>
        <p>开发者：Kiriusxv<br>
           邮箱：1337127972@qq.com<br>
           GitHub: <a href="https://github.com/Kiriusxv">Kirius</a></p>
    </div>

    <section class="slider">
        <div class="callbacks_container">
            <ul class="rslides" id="slider">
                <li>
                    <div class="w3layouts-banner-top w3layouts-banner-top1">
                        <div class="banner-dott">
                            <div class="container">
                                <div class="slider-info">
                                    <h2>公告</h2>
                                    <h4>测试</h4>
                                    <div class="w3ls-button">
                                        <a href="#" data-toggle="modal" data-target="#myModal">查看更多</a>
                                    </div>
                                    <div class="bannergrids">
                                        <div class="col-md-4">
                                            <ul class="custom-list">
                                                <li>
                                                    <i class="fa fa-cloud" aria-hidden="true"></i>
                                                    <p>本仓为厦门大学软件工程系资源共享仓库</p>
                                                </li>
                                            </ul>
                                        </div>
                                        <div class="col-md-4">
                                            <ul class="custom-list">
                                                <li>
                                                    <i class="fa fa-folder" aria-hidden="true"></i>
                                                    <p>所有资源由学生自主提供分享，严禁商用</p>
                                                </li>
                                            </ul>
                                        </div>
                                        <div class="col-md-4">
                                            <ul class="custom-list">
                                                <li>
                                                    <i class="fa fa-gitlab" aria-hidden="true"></i>
                                                    <p>拒绝未经允许的使用、分发、传播</p>
                                                </li>
                                            </ul>
                                        </div>
                                        <div class="clearfix"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </li>
            </ul>
        </div>
        <div class="clearfix"></div>
    </section>

    <script type="text/javascript" src="js/jquery-2.1.4.min.js"></script>
    <script type="text/javascript" src="js/bootstrap.js"></script>
    <script src="js/myself.js"></script>

    <script>
        function fetchResources(course, path = '') {
            if (!course) {
                console.error('Course is not defined');
                return;
            }
    
            document.getElementById('resource-title').innerText = `${course} 资源列表`;
    
            const username = 'Kiriusxv';
            const repo = 'XMU-SE';
            const branch = 'Kirius';
            const folderPath = encodeURIComponent(path ? path : `resources/${course}`);
            const apiURL = `https://api.github.com/repos/${username}/${repo}/contents/${folderPath}?ref=${branch}`;
            
            console.log(`Fetching from: ${apiURL}`);
    
            const resourceList = document.getElementById('resource-links');
            resourceList.innerHTML = '';
    
            fetch(apiURL)
                .then(response => {
                    if (!response.ok) {
                        throw new Error(`HTTP error! status: ${response.status}`);
                    }
                    return response.json();
                })
                .then(data => {
                    if (data.length === 0) {
                        resourceList.innerHTML = '<li>没有找到资源。</li>';
                    } else {
                        data.forEach(item => {
                            const li = document.createElement('li');
                            if (item.type === 'dir') {
                                const folderLink = document.createElement('a');
                                folderLink.href = '#';
                                folderLink.textContent = `[文件夹] ${item.name}`;
                                folderLink.onclick = () => {
                                    fetchResources(course, item.path);
                                    return false;
                                };
                                li.appendChild(folderLink);
                            } else if (item.type === 'file') {
                                const rawURL = `https://raw.githubusercontent.com/${username}/${repo}/Kirius/${item.path}`;
                                const fileLink = document.createElement('a');
                                fileLink.href = rawURL;
                                fileLink.textContent = item.name;
                                fileLink.setAttribute('download', item.name);
                                li.appendChild(fileLink);
                            }
                            resourceList.appendChild(li);
                        });
                    }
                    document.getElementById('resource-list').style.display = 'block';
                })
                .catch(error => {
                    console.error('Error fetching resources:', error);
                    resourceList.innerHTML = '<li>资源加载失败，请稍后重试。</li>';
                });
        }
    
        document.addEventListener("DOMContentLoaded", function() {
            document.querySelectorAll('.nav a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function(event) {
                    event.preventDefault();
    
                    // 隐藏所有部分
                    document.getElementById('resource-list').style.display = 'none';
                    document.getElementById('paolu').style.display = 'none';
                    document.getElementById('about-section').style.display = 'none';
                    document.getElementById('database').style.display = 'none';
                    document.getElementById('notify-section').style.display = 'none';
                    // 隐藏公告部分
                    document.querySelector('.slider').style.display = 'none';
    
                    // 显示相应部分
                    const targetId = this.getAttribute('href').substring(1); // 去掉开头的 #
                    const targetElement = document.getElementById(targetId);
                    if (targetElement) {
                        targetElement.style.display = 'block';
                    }
                });
            });
    
            // 默认显示资源列表
            document.getElementById('resource-list').style.display = 'block';
        });
    </script>
    
</body>
</html>
